{"ast":null,"code":"import { pushTransaction } from './push-transaction';\nconst {\n  YUP_CONTRACT_ACCOUNT,\n  YUP_ACCOUNT_MANAGER,\n  YUP_ETH_CONTRACT,\n  LP_ETH_CONTRACT,\n  YUP_BRIDGE,\n  LP_BRIDGE,\n  DSP_POOL,\n  BRIDGE_FEE,\n  YUPETH_BRIDGE_FEE\n} = process.env;\nexport async function transfer(account, data) {\n  const normalizedAmount = `${Number(data.amount).toFixed(4)} ${data.asset}`;\n  const normalizedYUPFee = `${Number(BRIDGE_FEE).toFixed(4)} YUP`;\n  const normalizedYUPETHFee = `${Number(YUPETH_BRIDGE_FEE).toFixed(4)} YUPETH`;\n  const tx = {\n    actions: [{\n      account: YUP_CONTRACT_ACCOUNT,\n      name: 'noop',\n      authorization: [{\n        actor: YUP_ACCOUNT_MANAGER,\n        permission: 'active'\n      }],\n      data: {}\n    }, {\n      account: data.asset === 'YUP' ? YUP_ETH_CONTRACT : LP_ETH_CONTRACT,\n      name: 'transfer',\n      authorization: [{\n        actor: account.name,\n        permission: account.authority\n      }],\n      data: {\n        ram_payer: YUP_ACCOUNT_MANAGER,\n        from: account.name,\n        to: data.asset === 'YUP' ? YUP_BRIDGE : LP_BRIDGE,\n        quantity: normalizedAmount,\n        memo: data.recipient\n      }\n    }, {\n      account: data.asset === 'YUP' ? YUP_ETH_CONTRACT : LP_ETH_CONTRACT,\n      name: 'transfer',\n      authorization: [{\n        actor: account.name,\n        permission: account.authority\n      }, {\n        actor: YUP_ACCOUNT_MANAGER,\n        permission: 'active'\n      }],\n      data: {\n        ram_payer: YUP_ACCOUNT_MANAGER,\n        from: account.name,\n        to: DSP_POOL,\n        quantity: data.asset === 'YUP' ? normalizedYUPFee : normalizedYUPETHFee,\n        memo: 'Bridge Fee'\n      }\n    }]\n  };\n  const txStatus = await pushTransaction(tx);\n  return txStatus;\n}\nexport async function createacct(account, data) {\n  const tx = {\n    actions: [{\n      account: YUP_CONTRACT_ACCOUNT,\n      name: 'noop',\n      authorization: [{\n        actor: YUP_ACCOUNT_MANAGER,\n        permission: 'active'\n      }],\n      data: {}\n    }, {\n      account: YUP_CONTRACT_ACCOUNT,\n      name: 'createacct',\n      authorization: [{\n        actor: account.name,\n        permission: account.authority\n      }],\n      data: {\n        owner: data.username,\n        eosname: account.name,\n        bio: data.bio,\n        avatar: data.avatar,\n        username: data.username\n      }\n    }]\n  };\n  const txStatus = await pushTransaction(tx);\n  return txStatus;\n}\nexport async function editacct(account, data) {\n  const tx = {\n    actions: [{\n      account: YUP_CONTRACT_ACCOUNT,\n      name: 'noop',\n      authorization: [{\n        actor: YUP_ACCOUNT_MANAGER,\n        permission: 'active'\n      }],\n      data: {}\n    }, {\n      account: YUP_CONTRACT_ACCOUNT,\n      name: 'editacct',\n      authorization: [{\n        actor: account.name,\n        permission: account.authority\n      }],\n      data: {\n        owner: account.name,\n        fullname: data.fullname || '',\n        bio: data.bio || '',\n        avatar: data.avatar || ''\n      }\n    }]\n  };\n  const txStatus = await pushTransaction(tx);\n  return txStatus;\n}","map":null,"metadata":{},"sourceType":"module"}