{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\"),\n    _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: !0\n}), exports.default = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\")),\n    _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\")),\n    _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\")),\n    _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\")),\n    _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\")),\n    _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\")),\n    _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\")),\n    _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\")),\n    PluginTypes = _interopRequireWildcard(require(\"../plugins/PluginTypes\")),\n    _Plugin2 = _interopRequireDefault(require(\"../plugins/Plugin\")),\n    _Blockchains = require(\"../models/Blockchains\"),\n    _WalletInterface = _interopRequireWildcard(require(\"../models/WalletInterface\")),\n    _SocketService = _interopRequireDefault(require(\"../services/SocketService\")),\n    isAvailable = !1;\n\n\"undefined\" != typeof window && \"undefined\" != typeof document && (\"undefined\" == typeof window.scatter ? document.addEventListener(\"scatterLoaded\", function () {\n  return isAvailable = !0;\n}) : isAvailable = !0);\n\nvar pollExistence = /*#__PURE__*/function () {\n  var a = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function a() {\n    var b,\n        c,\n        d = arguments;\n    return _regenerator.default.wrap(function (a) {\n      for (;;) {\n        switch (a.prev = a.next) {\n          case 0:\n            return b = 0 < d.length && void 0 !== d[0] ? d[0] : null, c = 1 < d.length && void 0 !== d[1] ? d[1] : 0, a.abrupt(\"return\", new Promise(function (a) {\n              return b || (b = a), isAvailable ? b(!0) : 5 < c ? b(!1) : void setTimeout(function () {\n                return pollExistence(b, c + 1);\n              }, 100);\n            }));\n\n          case 3:\n          case \"end\":\n            return a.stop();\n        }\n      }\n    }, a, this);\n  }));\n  return function () {\n    return a.apply(this, arguments);\n  };\n}(),\n    Extension = /*#__PURE__*/function (a) {\n  function b(a, c) {\n    var d;\n    return (0, _classCallCheck2.default)(this, b), d = (0, _possibleConstructorReturn2.default)(this, (0, _getPrototypeOf2.default)(b).call(this, _Blockchains.Blockchains.EOS, PluginTypes.WALLET_SUPPORT)), d.name = \"ScatterExtension\", d.context = a, d.holderFns = c, d;\n  }\n\n  return (0, _inherits2.default)(b, a), (0, _createClass2.default)(b, [{\n    key: \"connect\",\n    value: function () {\n      var a = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function a() {\n        var b = this;\n        return _regenerator.default.wrap(function (a) {\n          for (;;) {\n            switch (a.prev = a.next) {\n              case 0:\n                return a.abrupt(\"return\", new Promise( /*#__PURE__*/function () {\n                  var a = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function a(c) {\n                    var d;\n                    return _regenerator.default.wrap(function (a) {\n                      for (;;) {\n                        switch (a.prev = a.next) {\n                          case 0:\n                            return a.next = 2, pollExistence();\n\n                          case 2:\n                            d = a.sent, d && (!b.holderFns.get().wallet && (b.holderFns.get().wallet = b.name), c(!0));\n\n                          case 4:\n                          case \"end\":\n                            return a.stop();\n                        }\n                      }\n                    }, a, this);\n                  }));\n                  return function () {\n                    return a.apply(this, arguments);\n                  };\n                }()));\n\n              case 1:\n              case \"end\":\n                return a.stop();\n            }\n          }\n        }, a, this);\n      }));\n      return function b() {\n        return a.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"runBeforeInterfacing\",\n    value: function () {\n      var a = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function a() {\n        var b,\n            c,\n            d,\n            e,\n            f = this;\n        return _regenerator.default.wrap(function (a) {\n          for (;;) {\n            switch (a.prev = a.next) {\n              case 0:\n                return b = this.context.network, b && (c = window.scatter.getIdentity.bind(window.scatter), d = window.scatter.useIdentity.bind(window.scatter), window.scatter.getIdentity = function (a) {\n                  return c(a ? a : {\n                    accounts: [b]\n                  }).then(function (a) {\n                    return f.holderFns.get().identity = a, d(a), a;\n                  });\n                }, e = window.scatter.suggestNetwork.bind(window.scatter), window.scatter.suggestNetwork = function (a) {\n                  return e(a ? a : b);\n                }), this.holderFns.get().wallet === this.name && (window.scatter.wallet = this.name), this.holderFns.set(window.scatter), this.context = this.holderFns.get(), a.abrupt(\"return\", !0);\n\n              case 6:\n              case \"end\":\n                return a.stop();\n            }\n          }\n        }, a, this);\n      }));\n      return function b() {\n        return a.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"runAfterInterfacing\",\n    value: function () {\n      var a = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function a() {\n        return _regenerator.default.wrap(function (a) {\n          for (;;) {\n            switch (a.prev = a.next) {\n              case 0:\n                return this.context.isExtension = !0, this.context.connect = this.connect, a.abrupt(\"return\", !0);\n\n              case 3:\n              case \"end\":\n                return a.stop();\n            }\n          }\n        }, a, this);\n      }));\n      return function b() {\n        return a.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"methods\",\n    value: function a() {\n      return (0, _defineProperty2.default)({}, _WalletInterface.WALLET_METHODS.getIdentity, function () {\n        console.log(\"getid\");\n      });\n    }\n  }]), b;\n}(_Plugin2.default);\n\nexports.default = Extension;","map":null,"metadata":{},"sourceType":"script"}