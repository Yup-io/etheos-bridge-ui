{"version":3,"file":"index.es5.js","sources":["../src/styles.ts","../src/fuel.ts","../src/index.ts"],"sourcesContent":["export default `\n/* Anchor Link */\n\n.%prefix% * {\n    box-sizing: border-box;\n    line-height: 1;\n}\n\n.%prefix% {\n    font-family: -apple-system, system-ui, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue',\n        Arial, sans-serif;\n    font-size: 13px;\n    background: rgba(0, 0, 0, 0.65);\n    position: fixed;\n    top: 0px;\n    left: 0px;\n    width: 100%;\n    height: 100%;\n    z-index: 2147483647;\n    display: none;\n    align-items: center;\n    justify-content: center;\n}\n\n.%prefix%-active {\n    display: flex;\n}\n\n.%prefix%-inner {\n    background: #EFF1F7;\n    margin: 20px;\n    padding-top: 50px;\n    border-radius: 20px;\n    box-shadow: 0px 4px 100px rgba(0, 0, 0, .5);\n    width: 340px;\n    transition-property: all;\n    transition-duration: .5s;\n    transition-timing-function: ease-in-out;\n    position: relative;\n}\n\n.%prefix%-close {\n    display: block;\n    position: absolute;\n    top: 11px;\n    right: 16px;\n    width: 28px;\n    height: 28px;\n    background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M.57 12.1a.96.96 0 000 1.34c.37.36 1 .36 1.34 0L7 8.37l5.09 5.09c.36.35.97.35 1.34-.01a.96.96 0 000-1.34L8.34 7.01l5.08-5.08a.95.95 0 000-1.33.97.97 0 00-1.34-.01L6.99 5.68 1.91.59a.96.96 0 00-1.33 0 .97.97 0 00-.01 1.34l5.09 5.08-5.1 5.1z' fill='%23007AFF'/%3E%3C/svg%3E\");\n    background-size: 14px;\n    background-repeat: no-repeat;\n    background-position: 50% 7px;\n    border-radius: 100%;\n    cursor: pointer;\n}\n\n.%prefix%-close:hover {\n    background-color: white;\n}\n\n.%prefix%-logo {\n    width: 70px;\n    height: 70px;\n    margin: 0 auto;\n    margin-top: -56px;\n    background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill='%23fff' d='M18.81 9.19h33.25V59.5H18.81z'/%3E%3Cpath d='M38.45 28.88h-6.9L35 21.77l3.45 7.1z' fill='%233650A2'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M35 70a35 35 0 100-70 35 35 0 000 70zm2.36-55.4a2.62 2.62 0 00-4.72 0L21.9 36.75h5.84l1.7-3.5h11.13l1.7 3.5h5.83L37.36 14.6zM48.13 44.2h-5.26a7.76 7.76 0 01-5.24 7v-10.5a2.62 2.62 0 10-5.25 0v10.5a7.76 7.76 0 01-5.25-7h-5.25c.16 7.06 6 12.69 13.12 12.69 7.12 0 12.97-5.63 13.13-12.7z' fill='%233650A2'/%3E%3C/svg%3E\");\n}\n\n.%prefix%-logo.loading {\n    border-radius: 100%;\n    background-color: #3650A2;\n    background-image: url(\"data:image/svg+xml,%3Csvg viewBox='0.5 0.5 45 45' xmlns='http://www.w3.org/2000/svg' stroke='%23fff'%3E%3Cg fill='none' fill-rule='evenodd' transform='translate(1 1)' stroke-width='2'%3E%3Ccircle cx='22' cy='22' r='6' stroke-opacity='0'%3E%3Canimate attributeName='r' begin='1.5s' dur='3s' values='6;22' calcMode='linear' repeatCount='indefinite' /%3E%3Canimate attributeName='stroke-opacity' begin='1.5s' dur='3s' values='1;0' calcMode='linear' repeatCount='indefinite' /%3E%3Canimate attributeName='stroke-width' begin='1.5s' dur='3s' values='2;0' calcMode='linear' repeatCount='indefinite' /%3E%3C/circle%3E%3Ccircle cx='22' cy='22' r='6' stroke-opacity='0'%3E%3Canimate attributeName='r' begin='3s' dur='3s' values='6;22' calcMode='linear' repeatCount='indefinite' /%3E%3Canimate attributeName='stroke-opacity' begin='3s' dur='3s' values='1;0' calcMode='linear' repeatCount='indefinite' /%3E%3Canimate attributeName='stroke-width' begin='3s' dur='3s' values='2;0' calcMode='linear' repeatCount='indefinite' /%3E%3C/circle%3E%3Ccircle cx='22' cy='22' r='8'%3E%3Canimate attributeName='r' begin='0s' dur='1.5s' values='6;1;2;3;4;5;6' calcMode='linear' repeatCount='indefinite' /%3E%3C/circle%3E%3C/g%3E%3C/svg%3E\");\n}\n\n.%prefix%-logo.error {\n    background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 70 70'%3E%3Cdefs/%3E%3Ccircle cx='35' cy='35' r='35' fill='%23FC3D39'/%3E%3Cpath fill='%23fff' d='M22.3 48h25.4c2.5 0 4-1.7 4-4a4 4 0 00-.5-2L38.5 19.3a4 4 0 00-3.5-2 4 4 0 00-3.5 2L18.8 42.1c-.3.6-.5 1.3-.5 2 0 2.2 1.6 4 4 4zM35 37c-.9 0-1.4-.6-1.4-1.5l-.2-7.7c0-.9.6-1.6 1.6-1.6s1.7.7 1.7 1.6l-.3 7.7c0 1-.5 1.5-1.4 1.5zm0 6c-1 0-1.9-.8-1.9-1.8s.9-1.8 2-1.8c1 0 1.8.7 1.8 1.8 0 1-.9 1.8-1.9 1.8z'/%3E%3C/svg%3E\");\n}\n\n.%prefix%-logo.success {\n    background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 70 70'%3E%3Cdefs/%3E%3Ccircle cx='35' cy='35' r='35' fill='%233DC55D'/%3E%3Cpath fill='%23fff' d='M30.9 49.7a2 2 0 001.8-1L48 24.9c.3-.5.4-1 .4-1.4 0-1-.7-1.7-1.7-1.7-.8 0-1.2.3-1.6 1L30.8 45.4 23.5 36c-.5-.6-1-.9-1.6-.9-1 0-1.8.8-1.8 1.8 0 .4.2.9.6 1.3L29 48.7c.6.7 1.1 1 1.9 1z'/%3E%3C/svg%3E\");\n}\n\n.%prefix%-request {\n    padding: 20px;\n    border-radius: 20px;\n    border-top-left-radius: 0;\n    border-top-right-radius: 0;\n    background: white;\n}\n\n.%prefix%-info {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n}\n\n.%prefix%-title {\n    color: #000000;\n    font-size: 25px;\n    margin-top: 14px;\n    font-weight: bold;\n    line-height: 30px;\n}\n\n.%prefix%-subtitle {\n    margin: 14px 0;\n    color: #5C5C5C;\n    text-align: center;\n    line-height: 1.3;\n}\n\n.%prefix%-actions {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n}\n\n.%prefix%-uri {\n    width: 100%;\n}\n\n.%prefix%-uri a {\n    color: #007AFF;\n    background: #EFF1F7;\n    text-decoration: none;\n    font-size: 17px;\n    flex-grow: 1;\n    flex: 1;\n    width: 100%;\n    line-height: 1;\n    padding: 20px 18px;\n    border-radius: 12px;\n    font-weight: 400;\n    text-align: center;\n    display: block;\n    margin-top: 1em;\n}\n\n.%prefix%-qr {\n    margin-top: 1em;\n}\n\n.%prefix%-qr svg {\n    width: 100%;\n}\n\n.%prefix%-footnote {\n    text-align: center;\n\n    width: 100%;\n    position: absolute;\n    bottom: -26px;\n    left: 0;\n    color: white;\n}\n\n.%prefix%-footnote a {\n    color: white;\n}\n\n.%prefix%-wskeepalive {\n    display: none;\n}\n\n\n\n@media (prefers-color-scheme: dark) {\n    .%prefix%-inner {\n        background: #262D43;\n        color: white;\n    }\n    .%prefix%-request {\n        background: #131B33;\n    }\n    .%prefix%-title {\n        color: #FCFCFC;\n    }\n    .%prefix%-subtitle {\n        color: #B8C0DA;\n    }\n    .%prefix%-qr svg path {\n        fill: #131B33;\n    }\n    .%prefix%-qr svg path:last-child {\n        stroke: white;\n    }\n    .%prefix%-uri a {\n        color: #FCFCFC;\n        background: #262D43;\n    }\n    .%prefix%-close {\n        background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M.57 12.1a.96.96 0 000 1.34c.37.36 1 .36 1.34 0L7 8.37l5.09 5.09c.36.35.97.35 1.34-.01a.96.96 0 000-1.34L8.34 7.01l5.08-5.08a.95.95 0 000-1.33.97.97 0 00-1.34-.01L6.99 5.68 1.91.59a.96.96 0 00-1.33 0 .97.97 0 00-.01 1.34l5.09 5.08-5.1 5.1z' fill='%23FCFCFC'/%3E%3C/svg%3E\");\n    }\n    .%prefix%-close:hover {\n        background-color: black;\n    }\n}\n`\n","import {LinkSession} from 'anchor-link'\nimport {SigningRequest} from 'eosio-signing-request'\n\nconst supportedChains = {\n    'aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906':\n        'https://eos.greymass.com',\n    '2a02a0053e5a8cf73a56ba0fda11e4d92e0238a4a2aa74fccf46d5a910746840':\n        'https://jungle3.greymass.com',\n    '4667b205c6838ef70ff7988f6e8257e8be0e1284a2f59699054a018f743b1d11':\n        'https://telos.greymass.com',\n}\n\nasync function apiCall(url: string, body?: any) {\n    return (\n        await fetch(url, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: body ? JSON.stringify(body) : undefined,\n        })\n    ).json()\n}\n\nexport async function fuel(\n    request: SigningRequest,\n    session: LinkSession,\n    updatePrepareStatus: (message: string) => void\n) {\n    updatePrepareStatus('Detecting if Fuel is required.')\n    const cloned = request.clone()\n    const chainId = cloned.getChainId().toLowerCase()\n    const nodeUrl = supportedChains[chainId]\n    if (!nodeUrl) {\n        throw new Error('Chain does not support Fuel.')\n    }\n    const result = await apiCall(nodeUrl + '/v1/cosigner/sign', {\n        request: cloned,\n        signer: session.auth,\n    })\n    if (result.data.signatures[0]) {\n        cloned.setInfoKey('fuel_sig', result.data.signatures[0])\n    } else {\n        throw new Error('No signature returned from Fuel')\n    }\n    cloned.data.req = result.data.request\n    return cloned\n}\n","import {LinkSession, LinkStorage, LinkTransport} from 'anchor-link'\nimport {SigningRequest} from 'eosio-signing-request'\nimport * as qrcode from 'qrcode'\nimport styleText from './styles'\n\nimport {fuel} from './fuel'\n\nexport interface BrowserTransportOptions {\n    /** CSS class prefix, defaults to `anchor-link` */\n    classPrefix?: string\n    /** Whether to inject CSS styles in the page header, defaults to true. */\n    injectStyles?: boolean\n    /** Whether to display request success and error messages, defaults to true */\n    requestStatus?: boolean\n    /** Local storage prefix, defaults to `anchor-link`. */\n    storagePrefix?: string\n    /**\n     * Whether to use Greymass Fuel for low resource accounts, defaults to false.\n     * Note that this service is not available on all networks.\n     * Visit https://greymass.com/en/fuel for more information.\n     */\n    disableGreymassFuel?: boolean\n}\n\nclass Storage implements LinkStorage {\n    constructor(readonly keyPrefix: string) {}\n    async write(key: string, data: string): Promise<void> {\n        localStorage.setItem(this.storageKey(key), data)\n    }\n    async read(key: string): Promise<string | null> {\n        return localStorage.getItem(this.storageKey(key))\n    }\n    async remove(key: string): Promise<void> {\n        localStorage.removeItem(this.storageKey(key))\n    }\n    storageKey(key: string) {\n        return `${this.keyPrefix}-${key}`\n    }\n}\n\nexport default class BrowserTransport implements LinkTransport {\n    storage: LinkStorage\n\n    constructor(public readonly options: BrowserTransportOptions = {}) {\n        this.classPrefix = options.classPrefix || 'anchor-link'\n        this.injectStyles = !(options.injectStyles === false)\n        this.requestStatus = !(options.requestStatus === false)\n        this.fuelEnabled = options.disableGreymassFuel !== true\n        this.storage = new Storage(options.storagePrefix || 'anchor-link')\n    }\n\n    private classPrefix: string\n    private injectStyles: boolean\n    private requestStatus: boolean\n    private fuelEnabled: boolean\n    private activeRequest?: SigningRequest\n    private activeCancel?: (reason: string | Error) => void\n    private containerEl!: HTMLElement\n    private requestEl!: HTMLElement\n    private styleEl?: HTMLStyleElement\n    private countdownTimer?: NodeJS.Timeout\n    private closeTimer?: NodeJS.Timeout\n    private prepareStatusEl?: HTMLElement\n\n    private closeModal() {\n        this.hide()\n        if (this.activeCancel) {\n            this.activeRequest = undefined\n            this.activeCancel('Modal closed')\n            this.activeCancel = undefined\n        }\n    }\n\n    private setupElements() {\n        if (this.injectStyles && !this.styleEl) {\n            this.styleEl = document.createElement('style')\n            this.styleEl.type = 'text/css'\n            const css = styleText.replace(/%prefix%/g, this.classPrefix)\n            this.styleEl.appendChild(document.createTextNode(css))\n            document.head.appendChild(this.styleEl)\n        }\n        if (!this.containerEl) {\n            this.containerEl = this.createEl()\n            this.containerEl.className = this.classPrefix\n            this.containerEl.onclick = (event) => {\n                if (event.target === this.containerEl) {\n                    event.stopPropagation()\n                    this.closeModal()\n                }\n            }\n            document.body.appendChild(this.containerEl)\n        }\n        if (!this.requestEl) {\n            let wrapper = this.createEl({class: 'inner'})\n            let closeButton = this.createEl({class: 'close'})\n            closeButton.onclick = (event) => {\n                event.stopPropagation()\n                this.closeModal()\n            }\n            this.requestEl = this.createEl({class: 'request'})\n            wrapper.appendChild(this.requestEl)\n            wrapper.appendChild(closeButton)\n            this.containerEl.appendChild(wrapper)\n        }\n    }\n\n    private createEl(attrs?: {[key: string]: string}) {\n        if (!attrs) attrs = {}\n        const el = document.createElement(attrs.tag || 'div')\n        if (attrs) {\n            for (const attr of Object.keys(attrs)) {\n                const value = attrs[attr]\n                switch (attr) {\n                    case 'src':\n                        el.setAttribute(attr, value)\n                        break\n                    case 'tag':\n                        break\n                    case 'text':\n                        el.appendChild(document.createTextNode(value))\n                        break\n                    case 'class':\n                        el.className = `${this.classPrefix}-${value}`\n                        break\n                    default:\n                        el.setAttribute(attr, value)\n                }\n            }\n        }\n        return el\n    }\n\n    private hide() {\n        if (this.containerEl) {\n            this.containerEl.classList.remove(`${this.classPrefix}-active`)\n        }\n        this.clearTimers()\n    }\n\n    private show() {\n        if (this.containerEl) {\n            this.containerEl.classList.add(`${this.classPrefix}-active`)\n        }\n    }\n\n    private async displayRequest(request: SigningRequest) {\n        this.setupElements()\n\n        let sameDeviceRequest = request.clone()\n        sameDeviceRequest.setInfoKey('same_device', true)\n        sameDeviceRequest.setInfoKey('return_path', returnUrl())\n\n        let sameDeviceUri = sameDeviceRequest.encode(true, false)\n        let crossDeviceUri = request.encode(true, false)\n\n        const isIdentity = request.isIdentity()\n        const title = isIdentity ? 'Login' : 'Sign'\n        const subtitle = 'Scan the QR-code with your Anchor app.'\n\n        const qrEl = this.createEl({class: 'qr'})\n        try {\n            qrEl.innerHTML = await qrcode.toString(crossDeviceUri, {\n                margin: 0,\n                errorCorrectionLevel: 'L',\n            })\n        } catch (error) {\n            console.warn('Unable to generate QR code', error)\n        }\n\n        const linkEl = this.createEl({class: 'uri'})\n        const linkA = this.createEl({\n            tag: 'a',\n            href: crossDeviceUri,\n            text: 'Open Anchor app',\n        })\n        linkA.addEventListener('click', (event) => {\n            event.preventDefault()\n            if (navigator.userAgent.toLowerCase().indexOf('firefox') > -1) {\n                iframe.setAttribute('src', sameDeviceUri)\n            } else {\n                window.location.href = sameDeviceUri\n            }\n        })\n        linkEl.appendChild(linkA)\n\n        const iframe = this.createEl({\n            class: 'wskeepalive',\n            src: 'about:blank',\n            tag: 'iframe',\n        })\n        linkEl.appendChild(iframe)\n\n        const infoEl = this.createEl({class: 'info'})\n        const infoTitle = this.createEl({class: 'title', tag: 'span', text: title})\n        const infoSubtitle = this.createEl({class: 'subtitle', tag: 'span', text: subtitle})\n        infoEl.appendChild(infoTitle)\n        infoEl.appendChild(infoSubtitle)\n\n        const actionEl = this.createEl({class: 'actions'})\n        actionEl.appendChild(qrEl)\n        actionEl.appendChild(linkEl)\n\n        let footnoteEl: HTMLElement\n        if (isIdentity) {\n            footnoteEl = this.createEl({class: 'footnote', text: \"Don't have Anchor? \"})\n            const footnoteLink = this.createEl({\n                tag: 'a',\n                target: '_blank',\n                href: 'https://greymass.com/anchor',\n                text: 'Download Anchor app now',\n            })\n            footnoteEl.appendChild(footnoteLink)\n        } else {\n            footnoteEl = this.createEl({\n                class: 'footnote',\n                text: 'Anchor signing is brought to you by ',\n            })\n            const footnoteLink = this.createEl({\n                tag: 'a',\n                target: '_blank',\n                href: 'https://greymass.com',\n                text: 'Greymass',\n            })\n            footnoteEl.appendChild(footnoteLink)\n        }\n\n        emptyElement(this.requestEl)\n\n        const logoEl = this.createEl({class: 'logo'})\n        this.requestEl.appendChild(logoEl)\n        this.requestEl.appendChild(infoEl)\n        this.requestEl.appendChild(actionEl)\n        this.requestEl.appendChild(footnoteEl)\n\n        this.show()\n    }\n\n    public async showLoading() {\n        this.setupElements()\n        emptyElement(this.requestEl)\n        const infoEl = this.createEl({class: 'info'})\n        const infoTitle = this.createEl({class: 'title', tag: 'span', text: 'Loading'})\n        const infoSubtitle = this.createEl({\n            class: 'subtitle',\n            tag: 'span',\n            text: 'Preparing request...',\n        })\n        this.prepareStatusEl = infoSubtitle\n\n        infoEl.appendChild(infoTitle)\n        infoEl.appendChild(infoSubtitle)\n\n        const logoEl = this.createEl({class: 'logo loading'})\n        this.requestEl.appendChild(logoEl)\n        this.requestEl.appendChild(infoEl)\n\n        this.show()\n    }\n\n    public onRequest(request: SigningRequest, cancel: (reason: string | Error) => void) {\n        this.activeRequest = request\n        this.activeCancel = cancel\n        this.displayRequest(request).catch(cancel)\n    }\n\n    public onSessionRequest(\n        session: LinkSession,\n        request: SigningRequest,\n        cancel: (reason: string | Error) => void\n    ) {\n        if (session.metadata.sameDevice) {\n            request.setInfoKey('return_path', returnUrl())\n        }\n\n        if (session.type === 'fallback') {\n            this.onRequest(request, cancel)\n            if (session.metadata.sameDevice) {\n                // trigger directly on a fallback same-device session\n                window.location.href = request.encode()\n            }\n            return\n        }\n\n        this.activeRequest = request\n        this.activeCancel = cancel\n        this.setupElements()\n\n        const timeout = session.metadata.timeout || 60 * 1000 * 2\n        const deviceName = session.metadata.name\n\n        const start = Date.now()\n        const infoTitle = this.createEl({class: 'title', tag: 'span', text: 'Sign'})\n\n        const updateCountdown = () => {\n            const timeLeft = timeout + start - Date.now()\n            const timeFormatted =\n                timeLeft > 0 ? new Date(timeLeft).toISOString().substr(14, 5) : '00:00'\n            infoTitle.textContent = `Sign - ${timeFormatted}`\n        }\n        this.countdownTimer = setInterval(updateCountdown, 500)\n        updateCountdown()\n\n        const infoEl = this.createEl({class: 'info'})\n        infoEl.appendChild(infoTitle)\n\n        let subtitle: string\n        if (deviceName && deviceName.length > 0) {\n            subtitle = `Please open Anchor app on “${deviceName}” to review and sign the transaction.`\n        } else {\n            subtitle = 'Please review and sign the transaction in the linked wallet.'\n        }\n\n        const infoSubtitle = this.createEl({class: 'subtitle', tag: 'span', text: subtitle})\n        infoEl.appendChild(infoSubtitle)\n\n        emptyElement(this.requestEl)\n        const logoEl = this.createEl({class: 'logo'})\n        this.requestEl.appendChild(logoEl)\n        this.requestEl.appendChild(infoEl)\n        this.show()\n\n        if (isAppleHandheld() && session.metadata.sameDevice) {\n            window.location.href = 'anchor://link'\n        }\n    }\n\n    private clearTimers() {\n        if (this.closeTimer) {\n            clearTimeout(this.closeTimer)\n            this.closeTimer = undefined\n        }\n        if (this.countdownTimer) {\n            clearTimeout(this.countdownTimer)\n            this.countdownTimer = undefined\n        }\n    }\n\n    private updatePrepareStatus(message: string): void {\n        if (this.prepareStatusEl) {\n            this.prepareStatusEl.textContent = message\n        }\n    }\n\n    public async prepare(request: SigningRequest, session?: LinkSession) {\n        this.showLoading()\n        if (!this.fuelEnabled || !session || request.isIdentity()) {\n            // don't attempt to cosign id request or if we don't have a session attached\n            return request\n        }\n        try {\n            const result = fuel(request, session, this.updatePrepareStatus.bind(this))\n            const timeout = new Promise((r) => setTimeout(r, 3500)).then(() => {\n                throw new Error('Fuel API timeout after 3500ms')\n            })\n            return await Promise.race([result, timeout])\n        } catch (error) {\n            console.info(`Not applying fuel (${error.message})`)\n        }\n        return request\n    }\n\n    public onSuccess(request: SigningRequest) {\n        if (request === this.activeRequest) {\n            this.clearTimers()\n            if (this.requestStatus) {\n                this.setupElements()\n                const infoEl = this.createEl({class: 'info'})\n                const logoEl = this.createEl({class: 'logo'})\n                logoEl.classList.add('success')\n                const infoTitle = this.createEl({class: 'title', tag: 'span', text: 'Success!'})\n                const subtitle = request.isIdentity() ? 'Identity signed.' : 'Transaction signed.'\n                const infoSubtitle = this.createEl({class: 'subtitle', tag: 'span', text: subtitle})\n                infoEl.appendChild(infoTitle)\n                infoEl.appendChild(infoSubtitle)\n                emptyElement(this.requestEl)\n                this.requestEl.appendChild(logoEl)\n                this.requestEl.appendChild(infoEl)\n                this.show()\n                this.closeTimer = setTimeout(() => {\n                    this.hide()\n                }, 1.5 * 1000)\n            } else {\n                this.hide()\n            }\n        }\n    }\n\n    public onFailure(request: SigningRequest, error: Error) {\n        if (request === this.activeRequest && error['code'] !== 'E_CANCEL') {\n            this.clearTimers()\n            if (this.requestStatus) {\n                this.setupElements()\n                const infoEl = this.createEl({class: 'info'})\n                const logoEl = this.createEl({class: 'logo'})\n                logoEl.classList.add('error')\n                const infoTitle = this.createEl({\n                    class: 'title',\n                    tag: 'span',\n                    text: 'Transaction error',\n                })\n                const infoSubtitle = this.createEl({\n                    class: 'subtitle',\n                    tag: 'span',\n                    text: error.message || String(error),\n                })\n                infoEl.appendChild(infoTitle)\n                infoEl.appendChild(infoSubtitle)\n                emptyElement(this.requestEl)\n                this.requestEl.appendChild(logoEl)\n                this.requestEl.appendChild(infoEl)\n                this.show()\n            } else {\n                this.hide()\n            }\n        }\n    }\n}\n\nfunction emptyElement(el: HTMLElement) {\n    while (el.firstChild) {\n        el.removeChild(el.firstChild)\n    }\n}\n\nconst returnUrlAlphabet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'\nconst returnUrlAlphabetLen = returnUrlAlphabet.length\n/** Generate a return url with a random #fragment so mobile safari will redirect back w/o reload. */\nfunction returnUrl() {\n    let rv = window.location.href.split('#')[0] + '#'\n    for (let i = 0; i < 8; i++) {\n        rv += returnUrlAlphabet.charAt(Math.floor(Math.random() * returnUrlAlphabetLen))\n    }\n    return rv\n}\n\nfunction isAppleHandheld() {\n    return /iP(ad|od|hone)/i.test(navigator.userAgent)\n}\n"],"names":["qrcode.toString"],"mappings":"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"}